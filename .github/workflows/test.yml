name: Test
on: push
jobs:
  test:
    name: Run Tests
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: denoland/setup-deno@004814556e37c54a2f6e31384c9e18e983317366 # v1.1.0
        with:
          deno-version: v1.x
      - name: Download polkadot
        run: |
          docker run -d --entrypoint /bin/sh --rm -it --name tmp parity/polkadot:latest
          docker cp tmp:/usr/bin/polkadot /usr/local/bin
          docker stop tmp
      - run: deno task lint
      - run: deno task star
      - run: deno task test
